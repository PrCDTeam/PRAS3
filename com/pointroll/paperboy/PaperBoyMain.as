package com.pointroll.paperboy{	import com.pointroll.api.paperboy.PaperBoy;	import com.pointroll.api.events.paperboy.PaperBoyEvent;	import com.pointroll.api.activities.PaperBoyActivities;		import pointroll.initAd;	import pointroll.setFlashVar;		import flash.display.MovieClip;	import flash.display.DisplayObjectContainer;		import flash.events.EventDispatcher;	import pointroll.getFlashVar;	import pointroll.api.utils.net.isLocal;	public class PaperBoyMain extends EventDispatcher{		private var _paperboy:PaperBoy;				public function PaperBoyMain(_timeLine:DisplayObjectContainer) {			trace("PaperBoyMain constructor");			init(_timeLine);		}		private function init(_timeLine:DisplayObjectContainer):void {			trace("paperboy init");			pointroll.initAd(_timeLine);						if (isLocal()) {				pointroll.setFlashVar("PRPID", "0");				pointroll.setFlashVar("campaignID","7162be37b56ad569");				pointroll.setFlashVar("prZipcode","19104");				pointroll.setFlashVar("previewID","46B2B04E3D1DEEA6DDA0853E4BC2E154CABFA190956908C5E3132D4C46997DD95354827B82E004E84ECFFCC87174");			}			_paperboy = new PaperBoy();			_paperboy.campaignID = pointroll.getFlashVar("campaignID");			_paperboy.clientDomain = _paperboy.clientDirectory = "staples";			_paperboy.listingImageWidth = "160";						if(pointroll.getFlashVar("previewID")){				_paperboy.previewID = pointroll.getFlashVar("previewID");			}			if (pointroll.getFlashVar("prZipcode")) {				_paperboy.zipcode = pointroll.getFlashVar("prZipcode");				_paperboy.getStores(1);			}			trace(pointroll.getFlashVar("campaignID") + " " + pointroll.getFlashVar("prZipcode"))						_paperboy.addEventListener(PaperBoyEvent.LOAD_COMPLETE, onPaperBoyLoadComplete, false, 0, true);			_paperboy.addEventListener(PaperBoyEvent.LOAD_FAIL, onPaperBoyLoadFail, false, 0, true);		}		private function onPaperBoyLoadComplete(e:PaperBoyEvent):void{			var xml:XML = e.xmlData;			//trace(e.identifier + "\r" + xml);			switch(e.identifier){				case "getStores":					if (xml.collection.data.length()){						// pointroll.trackNonUIActivity(PaperBoyActivities.NON_UI+PaperBoyActivities.VIEW_STORE_LIST);						 _paperboy.storeID = xml.collection.data.@storeid[0];						 _paperboy.listingImageFormat = "png";						 _paperboy.getFeaturedListings(0,20);						//_paperboy.getAllListings(6,3);					}					else{						dispatchEvent(new PaperBoyEvent(PaperBoyEvent.LOAD_FAIL,e.xmlData));					}				break;				case "getFeaturedListings":					 if(xml.collection.data.length()){						 dispatchEvent(e);					 }					 else{						 dispatchEvent(new PaperBoyEvent(PaperBoyEvent.LOAD_FAIL,e.xmlData));					 }								break;				case "getAllListings":					 if(xml.collection.data.length()){						 dispatchEvent(e);					 }					 else{						 dispatchEvent(new PaperBoyEvent(PaperBoyEvent.LOAD_FAIL,e.xmlData));					 }				break;			}		}		private function onPaperBoyLoadFail(e:PaperBoyEvent):void{			dispatchEvent(e);		}	}}