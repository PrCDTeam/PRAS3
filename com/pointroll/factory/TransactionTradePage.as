package com.pointroll.factory {	import com.pointroll.interfaces.ITradePage;		import com.pointroll.data.PRDataScrapper;		import com.pointroll.events.PRDataScrapeEvents;		import com.pointroll.events.TradePageEvents;			import flash.events.EventDispatcher;		import com.pointroll.text.PRText;	import com.pointroll.api.utils.net.isLocal;		import flash.text.AntiAliasType;	public class TransactionTradePage extends EventDispatcher implements ITradePage{					private const ROSTER_CHANGE:String = "varPRRosterChange";				private const ROSTER_ADDS:String = "varPRRosterAdds";				private const TEAM_NAME:String = "varPRCurrTeamName";				private const DEFAULT:String = "default";			private var _dataScrapper:PRDataScrapper;				private var _varPRRosterChange:String;		private var _varPRRosterAdds:String;		private var _varPRNewPlayerTD:String;		private var _varPRCurrTeamName:String;				private var _dataObject:Object;				private var _prText:PRText;				private var _leading:int = 6;		private var _sentencePadding:int = 26;				public function TransactionTradePage() {			init();		}		private function init():void{			_dataObject = new Object();						_dataScrapper = new PRDataScrapper([ROSTER_CHANGE, ROSTER_ADDS,TEAM_NAME],100);			_dataScrapper.addEventListener(PRDataScrapeEvents.ON_DATA_SCRAPE_LOAD, onDataScrapperEvent);				_dataScrapper.addEventListener(PRDataScrapeEvents.ON_DATA_SCRAPE_FAIL, onDataScrapperEvent);			}		public function checkVariables():void{			if(_varPRCurrTeamName == null || _varPRCurrTeamName == ""){				//_dataObject.noun = DEFAULT;				buildPageCopy(3);			}else{				if(_varPRRosterChange.toLowerCase() == "true"){					//_dataObject.noun = ROSTER_CHANGE;					buildPageCopy(1);				}				else					if(_varPRRosterAdds.toLowerCase()  == "true"){						//_dataObject.noun = ROSTER_ADDS;						buildPageCopy(2);				}				else{					//_dataObject.noun = DEFAULT;					buildPageCopy(3);				}			}		}		public function getPageData():void{			_dataScrapper.load();		}		public function getDefault():String{			return DEFAULT;		}		private function buildPageCopy(index:int):void{						_prText = new PRText();			_dataObject.copy = new Array();			switch(index){				case 1:					 _dataObject.copyX = 12;					 _dataObject.copyY = 79;					 _dataObject.noun = "Lets hope those roster changes are as satisfying as a SNICKERS, TEAM NAME";					// {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100} {p:"embedFonts",v:true}					 					  _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:21},{p:"leading",v:_leading},{p:"bold",v:true});						 					 _dataObject.copy.push(_prText.createTextField("LET'S\rHOPE\rTHOSE\rROSTER\rCHANGES\rARE AS\rSATISFYING\rAS A\rSNICKERS<font size='19' face='GG Superscript'>®</font> ,",																   true,{p:"name",v:"headline0"},{p:"width",v:140},{p:"height",v:222},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"wordWrap", v:true}));																   										 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:21},{p:"leading",v:_leading},{p:"bold",v:true});							 					 _prText.createTextField(_varPRCurrTeamName+".",false,{p:"name",v:"headline1"},{p:"width",v:140},{p:"height",v:53},{p:"textColor",v:0xFCAF17},											 {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},											 {p:"embedFonts",v:true},{p:"wordWrap", v:true});											 					 _prText.resizeText(_prText._txtField,140,53)					 _dataObject.copy.push(_prText._txtField);						 					 _dataObject.copy[1].y = _dataObject.copy[0].y + _dataObject.copy[0].textHeight + _leading;					 				break;				case 2:					 _dataObject.copyX = 12;					 _dataObject.copyY = 79;					 _dataObject.noun = "Good call, TEAM NAME, those lineup additions are almost as satisfying as a SNICKERS.";					// {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100} {p:"embedFonts",v:true}					 					 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:20},{p:"leading",v:_leading},{p:"bold",v:true});						 					_dataObject.copy.push(_prText.createTextField("GOOD CALL",false,{p:"name",v:"headline0"},{p:"width",v:140},{p:"height",v:53},{p:"textColor",v:0xFFFFFF},											 {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},											 {p:"embedFonts",v:true},{p:"wordWrap", v:true}));					 					_prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:20},{p:"leading",v:_leading},{p:"bold",v:true}); 					_prText.createTextField(_varPRCurrTeamName+",",false,{p:"name",v:"headline1"},{p:"width",v:140},{p:"height",v:53},{p:"textColor",v:0xFCAF17},											 {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},											 {p:"embedFonts",v:true},{p:"wordWrap", v:true});											 					 _prText.resizeText(_prText._txtField,140,53)					 _dataObject.copy.push(_prText._txtField);						 _dataObject.copy[1].y = _dataObject.copy[0].y + _dataObject.copy[0].textHeight;						 					  _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:20},{p:"leading",v:_leading},{p:"bold",v:true});						 					 _dataObject.copy.push(_prText.createTextField("THOSE\rLINEUP\rADDITIONS\rARE ALMOST\rAS\rSATISYING\rAS A\rSNICKERS<font size='18' face='GG Superscript'>®</font> .",																   true,{p:"name",v:"headline2"},{p:"width",v:146},{p:"height",v:222},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"wordWrap", v:true}));																   					 _dataObject.copy[2].y = _dataObject.copy[1].y + _dataObject.copy[1].textHeight + _sentencePadding;		   				break;				case 3:					 _dataObject.copyX = 12;					 _dataObject.copyY = 157;					 _dataObject.noun = "May all your trades be as satisfying as a SNICKERS.";					 				 	 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:21},{p:"leading",v:_leading},{p:"bold",v:true});							 					 _dataObject.copy.push(_prText.createTextField("MAY ALL\rYOUR\rTRADES\rBE AS\rSATISFYING\rAS A\rSNICKERS<font size='19' face='GG Superscript'>®</font> ."																   ,true,{p:"name",v:"headline0"},{p:"width",v:146},{p:"height",v:216},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"mutiline",v:true}));										break;			}				dispatchEvent(new TradePageEvents(TradePageEvents.ON_DATA_LOAD, _dataObject));		}		private function onDataScrapperEvent(e:PRDataScrapeEvents):void{			trace("onDataScrapperEvent: " + e.type);			switch(e.type){				case "onDataScrapeLoad":					 _varPRRosterChange = e.params[ROSTER_CHANGE];					 _varPRRosterAdds = e.params[ROSTER_ADDS]; 					 _varPRCurrTeamName = e.params[TEAM_NAME]; 					 					 checkVariables();				break;				case "onDataScrapeFail":										 if(isLocal()){						_varPRCurrTeamName = "A PointRoll Fantasy";						buildPageCopy(1);											 }					 else{						 buildPageCopy(3);					 }								 				break;			}		}	}	}