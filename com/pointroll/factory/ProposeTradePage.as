package com.pointroll.factory {	import com.pointroll.interfaces.ITradePage;		import com.pointroll.data.PRDataScrapper;		import com.pointroll.events.PRDataScrapeEvents;		import com.pointroll.events.TradePageEvents;			import flash.events.EventDispatcher;		import com.pointroll.text.PRText;	import com.pointroll.api.utils.net.isLocal;		import flash.text.AntiAliasType;	public class ProposeTradePage extends EventDispatcher implements ITradePage{					private const PROPOSED_TRADE:String = "varPRProposedTrade";				private const ROSTER_CHANGE:String = "varPRRosterChange";		private const ROSTER_ADDS:String = "varPRRosterAdds";				private const TEAM_NAME:String = "varPRCurrTeamName";				private const DEFAULT:String = "default";			private var _dataScrapper:PRDataScrapper;				private var _varPRProposedTrade:String;		private var _varPRRosterChange:String;		private var _varPRRosterAdds:String;		private var _varPRCurrTeamName:String;				private var _dataObject:Object;				private var _prText:PRText;				private var _leading:int = 6;		private var _sentencePadding:int = 26;				public function ProposeTradePage() {			init();		}		private function init():void{			_dataObject = new Object();						_dataScrapper = new PRDataScrapper([PROPOSED_TRADE,ROSTER_CHANGE,ROSTER_ADDS,TEAM_NAME],100);			_dataScrapper.addEventListener(PRDataScrapeEvents.ON_DATA_SCRAPE_LOAD, onDataScrapperEvent);				_dataScrapper.addEventListener(PRDataScrapeEvents.ON_DATA_SCRAPE_FAIL, onDataScrapperEvent);			}		public function checkVariables():void{			if(_varPRCurrTeamName == null || _varPRCurrTeamName == ""){				//_dataObject.noun = DEFAULT;				buildPageCopy(4);			}else{				if(_varPRProposedTrade.toLowerCase()  == "true"){					//_dataObject.noun = PROPOSED_TRADE;					buildPageCopy(1);				}				else					if(_varPRRosterChange.toLowerCase()  == "true"){						//_dataObject.noun = ROSTER_CHANGE;						buildPageCopy(2);					}				else					if(_varPRRosterAdds.toLowerCase()  == "true"){						//_dataObject.noun = ROSTER_ADDS;						buildPageCopy(3);					}								else{					//_dataObject.noun = DEFAULT;					buildPageCopy(4);				}			}			trace("checkVariables: " + _dataObject.noun);		}		public function getPageData():void{			_dataScrapper.load();		}		public function getDefault():String{			return DEFAULT;		}		private function buildPageCopy(index:int):void{						_prText = new PRText();			_dataObject.copy = new Array();			switch(index){				case 1:					 _dataObject.copyX = 15;					 _dataObject.copyY = 105;					 _dataObject.noun = "Hey TEAM NAME, sweeten the deal with a SNICKERS and make it a sure thing.";					// {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100} {p:"embedFonts",v:true}					 					 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:21},{p:"leading",v:_leading},{p:"bold",v:true});						 					_dataObject.copy.push( _prText.createTextField("HEY",false,{p:"name",v:"headline0"},{p:"width",v:140},{p:"height",v:53},{p:"textColor",v:0xFFFFFF},											 {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},											 {p:"embedFonts",v:true},{p:"wordWrap", v:true}));					 					_prText.createTextField(_varPRCurrTeamName+",",false,{p:"name",v:"headline1"},{p:"width",v:140},{p:"height",v:53},{p:"textColor",v:0xFCAF17},											 {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},											 {p:"embedFonts",v:true},{p:"wordWrap", v:true});											 					 _prText.resizeText(_prText._txtField,140,53)					 _dataObject.copy.push(_prText._txtField);						 _dataObject.copy[1].y = _dataObject.copy[0].y + _dataObject.copy[0].textHeight;						 					  _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:21},{p:"leading",v:_leading},{p:"bold",v:true});						 					 _dataObject.copy.push(_prText.createTextField("SWEETEN\rTHE DEAL\rWITH A\rSNICKERS<font size='19' face='GG Superscript'>®</font> \rAND MAKE\rIT A SURE THING.",																   true,{p:"name",v:"headline2"},{p:"width",v:140},{p:"height",v:240},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"wordWrap", v:true}));																   					 _dataObject.copy[2].y = _dataObject.copy[1].y + _dataObject.copy[1].textHeight + _leading+2;					break;				case 2:					 _dataObject.copyX = 11;					 _dataObject.copyY = 88;					 _dataObject.noun = "TEAM NAME, are you satisfied with your new lineup? Grab a SNICKERS while you think it over.";					// {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100} {p:"embedFonts",v:true}					 					 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:21},{p:"leading",v:_leading},{p:"bold",v:true});							 					 _prText.createTextField(_varPRCurrTeamName+",",false,{p:"name",v:"headline0"},{p:"width",v:140},{p:"height",v:53},{p:"textColor",v:0xFCAF17},											 {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},											 {p:"embedFonts",v:true},{p:"wordWrap", v:true});					 _prText.resizeText(_prText._txtField,140,53)					 _dataObject.copy.push(_prText._txtField);						 					  _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:21},{p:"leading",v:_leading},{p:"bold",v:true});						 					 _dataObject.copy.push(_prText.createTextField("ARE YOU\rSATISFIED \rWITH \rYOUR NEW \rLINEUP?",																   false,{p:"name",v:"headline1"},{p:"width",v:140},{p:"height",v:222},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"wordWrap", v:true}));																   					 _dataObject.copy[1].y = _dataObject.copy[0].y + _dataObject.copy[0].textHeight + _leading+2;						 					 _dataObject.copy.push(_prText.createTextField("GRAB A\rSNICKERS<font size='19' face='GG Superscript'>®</font> \rWHILE YOU\rTHINK\rIT OVER.",																   true,{p:"name",v:"headline2"},{p:"width",v:140},{p:"height",v:222},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"wordWrap", v:true}));																	   					 _dataObject.copy[2].y = _dataObject.copy[1].y + _dataObject.copy[1].textHeight + _sentencePadding;	   				break;				case 3:					 _dataObject.copyX = 10;					 _dataObject.copyY = 76;					 _dataObject.noun = "Are those new additions to TEAM NAME satisfying? Grab a SNICKERS while you think it over.";					 				 	 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:20},{p:"leading",v:_leading},{p:"bold",v:true});						 					 _dataObject.copy.push(_prText.createTextField("ARE\rTHOSE\rNEW\rADDITIONS\rTO"																   ,false,{p:"name",v:"headline0"},{p:"width",v:146},{p:"height",v:216},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"mutiline",v:true}));											 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:20},{p:"leading",v:_leading},{p:"bold",v:true});					_prText.createTextField(_varPRCurrTeamName,false,{p:"name",v:"headline1"},{p:"width",v:140},{p:"height",v:53},{p:"textColor",v:0xFCAF17},											{p:"embedFonts",v:true},{p:"wordWrap", v:true});																_prText.resizeText(_prText._txtField,140,53)					_dataObject.copy.push(_prText._txtField);												_dataObject.copy[1].y = _dataObject.copy[0].y + _dataObject.copy[0].textHeight + _leading;										 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:20},{p:"leading",v:_leading},{p:"bold",v:true});					 										 _dataObject.copy.push(_prText.createTextField("SATISFYING?",																   true,{p:"name",v:"headline2"},{p:"width",v:150},{p:"height",v:222},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true},{p:"wordWrap", v:true}));						 _dataObject.copy[2].y = _dataObject.copy[1].y + _dataObject.copy[1].textHeight + _leading;	  					 					 _dataObject.copy.push(_prText.createTextField("GRAB A\rSNICKERS<font size='18' face='GG Superscript'>®</font> \rWHILE YOU\rTHINK\rIT OVER.",																   true,{p:"name",v:"headline3"},{p:"width",v:140},{p:"height",v:222},{p:"textColor",v:0xFFFFFF},																   {p:"antiAliasType", v:AntiAliasType.ADVANCED},{p:"sharpness", v:100},{p:"thickness", v:100},																   {p:"embedFonts",v:true}, {p:"wordWrap", v:true}));																				   					 _dataObject.copy[3].y = _dataObject.copy[2].y + _dataObject.copy[2].textHeight + _sentencePadding;	  				break						case 4:					 _dataObject.copyX = 12;					 _dataObject.copyY = 150;					 _dataObject.noun = "Satisfied with your team's performance this week? Grab a SNICKERS while you think it over.";					 				 	 _prText.createTextFormat({p:"font",v:new HermesBlack().fontName},{p:"size",v:17.4},{p:"leading",v:6},{p:"bold",v:true});					 					 _dataObject.copy.push(_prText.createTextField("SATISFIED\rWITH YOUR\rTEAM'S\rPERFORMANCE\rTHIS WEEK?"																   ,false,{p:"name",v:"headline0"},{p:"width",v:146},{p:"height",v:216},{p:"textColor",v:0xFFFFFF},																   {p:"embedFonts",v:true},{p:"mutiline",v:true}));						 _dataObject.copy.push(_prText.createTextField("GRAB A\rSNICKERS<font size='15' face='GG Superscript'>®</font> \rWHILE YOU\rTHINK\rIT OVER."																   ,true,{p:"name",v:"headline1"},{p:"width",v:146},{p:"height",v:216},{p:"textColor",v:0xFFFFFF},																   {p:"embedFonts",v:true},{p:"mutiline",v:true}));						_dataObject.copy[1].y = _dataObject.copy[0].y + _dataObject.copy[0].textHeight + _sentencePadding;						break				}				dispatchEvent(new TradePageEvents(TradePageEvents.ON_DATA_LOAD, _dataObject));		}			private function onDataScrapperEvent(e:PRDataScrapeEvents):void{			trace("onDataScrapperEvent: " + e.type);			switch(e.type){				case "onDataScrapeLoad":					 _varPRProposedTrade = e.params[PROPOSED_TRADE];					 _varPRRosterChange = e.params[ROSTER_CHANGE]; 					 _varPRRosterAdds = e.params[ROSTER_ADDS];					 _varPRCurrTeamName = e.params[TEAM_NAME]; 					 					 checkVariables();				break;				case "onDataScrapeFail":										 if(isLocal()){						_varPRCurrTeamName = "A PointRoll Fantasy ";						buildPageCopy(4);											 }					 else{						 buildPageCopy(4);					 }								 				break;			}		}	}	}